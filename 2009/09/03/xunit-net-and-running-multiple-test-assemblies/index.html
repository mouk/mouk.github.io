<!DOCTYPE html>
<html class="fuelux" lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv='Content-Type' content='text/html; charset=utf-8'>
    <title>xUnit.net and running multiple test assemblies</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Technical Web Development Blog">
    <meta name="author" content="Garry Welding">
    <script src="/js/all.js" type="text/javascript"></script>
	<link href="/css/all.css" rel="stylesheet">	
	
    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/favicon.ico">
  </head>
  <body data-spy="scroll" data-target=".subnav" data-offset="50">
    <div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>
            <a class="brand" href="http://mouk.github.io">Abstract AST</a>
            <div class="nav-collapse">
                <ul class="nav">
                    <li class="">
                        <a href="http://mouk.github.io"><i class="icon-home"></i> Home</a>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                            <i class="icon-list"></i> Projects <b class="caret"></b>
                        </a>
                        <ul class="dropdown-menu">
                            <li class=""><a href="https://github.com/gkwelding/WSDLInterpreter" title="take me to the WSDLInterpreter github page" target="_blank">WSDLInterpreter</a></li>
                            <li class=""><a href="https://github.com/gkwelding/Scene7WSDLPHPWrapper" title="take me to the Scene7WSDLPHPWrapper github page" target="_blank">Adobe Scene7 WSDL PHP Wrapper</a></li>
                            <li class=""><a href="https://github.com/gkwelding/GoogleMapsV3CI" title="take me to the Google Maps V3 API for CodeIgniter github page" target="_blank">Google Maps V3 API for CodeIgniter</a></li>
                            <li class=""><a href="https://github.com/gkwelding/MailchimpAPICI" title="take me to the MailChimp API for CodeIgniter github page" target="_blank">MailChimp API for CodeIgniter</a></li>
                            <li class=""><a href="https://github.com/gkwelding/FuelPHP-Social-Package" title="take em to the FuelPHP Social Package github page" target="_blank">FuelPHP Social Package</a></li>
                            <li class=""><a href="https://github.com/gkwelding/Bugzilla-Command-Line-Stats" title="take em to the Bugzilla Command Line Stats github page" target="_blank">Bugzilla Command Line Stats</a></li>
                            <li class=""><a href="https://github.com/gkwelding/ihelp" title="Make em to the iHelp jQuery Plugin github page" target="_blank">iHelp jQuery Plugin</a></li>
                        </ul>
                    </li>
                    <li id="search" class="search hidden-phone hidden-tablet">
                        <span class="icon search"></span>
                        <input type="text" placeholder="search">
                        <i id="close" class="icon-remove"></i>
                        <ol id="search-results" class="dropdown-menu">
                        </ol>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>

    <div class="container">
        <div class="content">
            <div class="row">
                <div class="span7 columns">
                    <div class="content">    
    <div class="row">	
        <div class="span7 column">
            <h1>xUnit.net and running multiple test assemblies</h1>
        </div>
    </div>
    
    <div class="row">	
        <div class="span7 columns">
            <p><a href="http://www.codeplex.com/xunit">xUnit.net</a> is a unit testing framework for the .Net platform designed with inspired by some nice ideas like reducing custom attributes, one instance per method , etc. The Internet is full of blog posts and articles about xUnit. In this <a href="http://xunit.codeplex.com/Wiki/View.aspx?title=Comparisons&amp;referringTitle=Home">link</a> you can find a comparison of xUnit and other popular unit testing frameworks.</p>  <p>For the CI I use MSBuild script that compiles, runs test, generates documentations, etc.&#160; For test projects I have the habit of postfixing them with &quot;Tests”&#160; to simplify fetching all test dlls in MSBuild scripts using wild cards (Who dares to claim that Convention over Configuration is new in the .Net world? ). Running all NUnit tests in some project would look like :</p>  <div style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px" id="scid:812469c5-0cb0-4c63-8c15-c81123a09de7:fd8405d6-bdad-4cf5-a85c-c20227d95a22" class="wlWriterSmartContent">   <pre class="xml" name="code">&lt;CreateItem Include=&quot;tests\*\bin\Debug\*.Tests.dll&quot;&gt;
  &lt;Output TaskParameter=&quot;Include&quot; ItemName=&quot;TestAssembly&quot; /&gt;
&lt;/CreateItem&gt;
&lt;NUnit Assemblies=&quot;@(TestAssembly)&quot; ToolPath=&quot;$(NUnit-ToolPath)&quot; /&gt;</pre>
</div>

<p>Adding new test project will require me to add nothing to the build script. I have just to follow the convention.</p>

<p>Unfortunately this is not possible with xUnit task because it accepts only one assembly. Thus I have to specify each assembly separately. The xml result will be also split. <a href="http://twitter.com/bradwilson">@bradwilson</a> nicely wrote me via&#160; Twitter, that I can use a project file to specify multiple assembly.&#160; This, while solving the second problem, doesn’t enable you to use wild cards. You have to add each assembly manually to the project.</p>

<p>Gallio is a tool&#160; or, may better a framework, for running many test frameworks in the same way and provides as unique results format. It integrates also very well with some build servers.</p>

<p>To integrate Gallio in my MSBuild script I downloaded the bits from <a href="http://www.gallio.org/">here</a> and extracted them to the tools folder inside my project root folder.</p>

<p>Running the tests was as simple as</p>

<div style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px" id="scid:812469c5-0cb0-4c63-8c15-c81123a09de7:5707c53a-fbff-429b-86a7-a4ec182f9f52" class="wlWriterSmartContent">
  <pre class="xml" name="code">&lt;UsingTask AssemblyFile=&quot;$(ToolPath)\gallio\Gallio.MSBuildTasks.dll&quot;
	TaskName=&quot;Gallio&quot; /&gt;

&lt;Target Name=&quot;Test&quot; DependsOnTargets=&quot;Build&quot;&gt;
	&lt;Message Text=&quot;==== Starting Gallio to run tests ===&quot; /&gt;
	
	&lt;CreateItem Include=&quot;tests\*\bin\Debug\*Tests.dll&quot;&gt;
      &lt;Output TaskParameter=&quot;Include&quot; ItemName=&quot;TestAssemblies&quot; /&gt;
    &lt;/CreateItem&gt;
    &lt;Gallio RunnerExtensions=&quot;TeamCityExtension,Gallio.TeamCityIntegration&quot;
        Assemblies=&quot;@(TestAssemblies)&quot;  /&gt; 
&lt;/Target&gt;</pre>
</div>

<p><em>RunnerExtensions</em> is an extension for Gallio to provide TeamCity with status messages. Integrating Gallio with TeamCity will be discussed in a following post.</p>

<p>&#160;</p>

<h3>NUnit&#160;&#160; and running multiple assemblies from the console</h3>

<p>Even though NUnit MSBuild task supports multiple assemblies, if you want to use NCover with NUnit&#160; you have to do some manual work to enable NCover running NUnit console tool. The @() operator of MSBuild join all paths with a semicolon. On the other hand NUnit console runner expect all assemblies to be separated with a white space. Fortunately you can tell @() how it should concatenate the paths.</p>

<div style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px" id="scid:812469c5-0cb0-4c63-8c15-c81123a09de7:cfcb8e85-8674-4b37-9ae8-0ae4a90f0d97" class="wlWriterSmartContent">
  <pre class="xml" name="code">&lt;NCover ToolPath=&quot;$(NCoverPath)&quot;
        CommandLineExe=&quot;$(NUnit-ToolPath)\nunit-console.exe&quot;
        WorkingDirectory=&quot;.&quot;
        CommandLineArgs=&quot;@(TestDll-&gt;'%(Identity)', ' ')&quot;
        CoverageFile=&quot;$(CoverageFile)&quot;
        LogFile=&quot;$(CoveragePath)\Coverage.log&quot;
        AssemblyList=&quot;@(CoverageDll)&quot; /&gt;</pre>
</div>

<p>In the fourth line @ concatenate the relative path of each file using a white space. You may need to surround each path with a quote if it contains white spaces.</p>

        </div>
    </div>
    
    <div class="pager hidden-phone hidden-tablet">
        <a class="prev" href="/2009/08/23/using-ironpython-to-configure-castle-windsor-ii/" title="Previous Post: Using IronPython to configure Castle Windsor II"><i class="icon-arrow-left icon-white"></i></a>
        <a class="next" href="/2009/09/05/using-ironpython-to-configure-castle-windsor-iii/" title="Previous Post: Using IronPython to configure Castle Windsor III"><i class="icon-arrow-right icon-white"></i></a>
    </div>
    
    <div class="row">	
        <div class="span7 column">
            <p>
              <i class="icon-calendar"></i> September  3, 2009
              | <i class="icon-comment"></i> <a href="/2009/09/03/xunit-net-and-running-multiple-test-assemblies/#disqus_thread" data-disqus-identifier="/2009/09/03/xunit-net-and-running-multiple-test-assemblies/"></a>     
              <br />
              <i class="icon-tags"></i> Tags : <a href="/tags/Gallio" rel="tooltip" title="View pages tagged with &quot;Gallio&quot;"><span class="label label-info">Gallio</span></a>     <a href="/tags/MSBuild" rel="tooltip" title="View pages tagged with &quot;MSBuild&quot;"><span class="label label-info">MSBuild</span></a>     <a href="/tags/NCover" rel="tooltip" title="View pages tagged with &quot;NCover&quot;"><span class="label label-info">NCover</span></a>     <a href="/tags/NUnit" rel="tooltip" title="View pages tagged with &quot;NUnit&quot;"><span class="label label-info">NUnit</span></a>     <a href="/tags/Programming" rel="tooltip" title="View pages tagged with &quot;Programming&quot;"><span class="label label-info">Programming</span></a>     <a href="/tags/tdd" rel="tooltip" title="View pages tagged with &quot;tdd&quot;"><span class="label label-info">tdd</span></a>     <a href="/tags/TeamCity" rel="tooltip" title="View pages tagged with &quot;TeamCity&quot;"><span class="label label-info">TeamCity</span></a>     <a href="/tags/Test" rel="tooltip" title="View pages tagged with &quot;Test&quot;"><span class="label label-info">Test</span></a>     <a href="/tags/unit" rel="tooltip" title="View pages tagged with &quot;unit&quot;"><span class="label label-info">unit</span></a>     <a href="/tags/xUnit" rel="tooltip" title="View pages tagged with &quot;xUnit&quot;"><span class="label label-info">xUnit</span></a>   
              <br />
              <a href="https://twitter.com/share" class="twitter-share-button" data-via="dermouk">Tweet</a> <g:plusone size="medium"></g:plusone></h5>
            </p>
        </div>
    </div>

    
    
    <!-- Twitter -->
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

    <!-- Google + -->
    <script type="text/javascript">
      (function() {
        var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
        po.src = 'https://apis.google.com/js/plusone.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
      })();
    </script>
</div>
    

                </div>
                <div class="span4 columns">
                     <h2>About Me</h2>
<p>
    <img src="http://www.gravatar.com/avatar/dd2dbc41e3babec00f70d4becf4092cf?s=160" alt="Moukarram Kabbash" title="Follow me on Twitter @dermouk"  class="img-rounded floatLeft" />
    This blog is kept alive by me,  Moukarram Kabbash, a programmer, hobby photographer from Dortmund in Germany.
</p>					
<p>
    <h6>mouk.github.com</h6> <iframe class="github-btn" src="http://ghbtns.com/github-btn.html?user=mouk&repo=mouk.github.com&type=watch&count=true" allowtransparency="true" frameborder="0" scrolling="0" width="80px" height="20px"></iframe>&nbsp;<iframe class="github-btn" src="http://ghbtns.com/github-btn.html?user=mouk&repo=mouk.github.com&type=fork&count=true" allowtransparency="true" frameborder="0" scrolling="0" width="98px" height="20px"></iframe>
</p>
<p>
    <a href="https://twitter.com/dermouk" class="twitter-follow-button" data-link-color="#0069D6" data-show-count="true">Follow @dermouk</a>
</p>
<p>
    <ul class="buttons unstyled">
        <li><a href="https://github.com/mouk" rel="me" class="social github" title="Go to github.com/mouk" target="_blank"></a></li>
        <li><a href="http://www.twitter.com/dermouk" rel="me" class="social twitter" title="Go to twitter.com/dermouk" target="_blank"></a></li>
        <li><a href="https://github.com/mouk/Feedback/issues/new" rel="me" class="social mail" title="Leave feedback for Moukarram Kabbash"  target="_blank"></a></li>				
    </ul>
</p>
                </div>
                <div class="span4 columns hidden-phone hidden-tablet">
                     <i class="icon-tags"></i> Tags :<br> <a href="/tags/code" rel="tooltip" title="View posts tagged with &quot;code&quot;"><span class="label label-info">code</span></a>     <a href="/tags/codepaste" rel="tooltip" title="View posts tagged with &quot;codepaste&quot;"><span class="label label-info">codepaste</span></a>     <a href="/tags/comparison" rel="tooltip" title="View posts tagged with &quot;comparison&quot;"><span class="label label-info">comparison</span></a>     <a href="/tags/gist" rel="tooltip" title="View posts tagged with &quot;gist&quot;"><span class="label label-info">gist</span></a>     <a href="/tags/github" rel="tooltip" title="View posts tagged with &quot;github&quot;"><span class="label label-info">github</span></a>     <a href="/tags/paste" rel="tooltip" title="View posts tagged with &quot;paste&quot;"><span class="label label-info">paste</span></a>     <a href="/tags/paste-it" rel="tooltip" title="View posts tagged with &quot;paste-it&quot;"><span class="label label-info">paste-it</span></a>     <a href="/tags/pastebin" rel="tooltip" title="View posts tagged with &quot;pastebin&quot;"><span class="label label-info">pastebin</span></a>     <a href="/tags/pastie" rel="tooltip" title="View posts tagged with &quot;pastie&quot;"><span class="label label-info">pastie</span></a>     <a href="/tags/Programming" rel="tooltip" title="View posts tagged with &quot;Programming&quot;"><span class="label label-info">Programming</span></a>     <a href="/tags/C#" rel="tooltip" title="View posts tagged with &quot;C#&quot;"><span class="label label-info">C#</span></a>     <a href="/tags/Castle" rel="tooltip" title="View posts tagged with &quot;Castle&quot;"><span class="label label-info">Castle</span></a>     <a href="/tags/DSL" rel="tooltip" title="View posts tagged with &quot;DSL&quot;"><span class="label label-info">DSL</span></a>     <a href="/tags/IoC" rel="tooltip" title="View posts tagged with &quot;IoC&quot;"><span class="label label-info">IoC</span></a>     <a href="/tags/IronPython" rel="tooltip" title="View posts tagged with &quot;IronPython&quot;"><span class="label label-info">IronPython</span></a>     <a href="/tags/Windsor" rel="tooltip" title="View posts tagged with &quot;Windsor&quot;"><span class="label label-info">Windsor</span></a>     <a href="/tags/XML" rel="tooltip" title="View posts tagged with &quot;XML&quot;"><span class="label label-info">XML</span></a>     <a href="/tags/Gallio" rel="tooltip" title="View posts tagged with &quot;Gallio&quot;"><span class="label label-info">Gallio</span></a>     <a href="/tags/MSBuild" rel="tooltip" title="View posts tagged with &quot;MSBuild&quot;"><span class="label label-info">MSBuild</span></a>     <a href="/tags/NCover" rel="tooltip" title="View posts tagged with &quot;NCover&quot;"><span class="label label-info">NCover</span></a>     <a href="/tags/NUnit" rel="tooltip" title="View posts tagged with &quot;NUnit&quot;"><span class="label label-info">NUnit</span></a>     <a href="/tags/tdd" rel="tooltip" title="View posts tagged with &quot;tdd&quot;"><span class="label label-info">tdd</span></a>     <a href="/tags/TeamCity" rel="tooltip" title="View posts tagged with &quot;TeamCity&quot;"><span class="label label-info">TeamCity</span></a>     <a href="/tags/Test" rel="tooltip" title="View posts tagged with &quot;Test&quot;"><span class="label label-info">Test</span></a>     <a href="/tags/unit" rel="tooltip" title="View posts tagged with &quot;unit&quot;"><span class="label label-info">unit</span></a>     <a href="/tags/xUnit" rel="tooltip" title="View posts tagged with &quot;xUnit&quot;"><span class="label label-info">xUnit</span></a>     <a href="/tags/CI" rel="tooltip" title="View posts tagged with &quot;CI&quot;"><span class="label label-info">CI</span></a>     <a href="/tags/Task" rel="tooltip" title="View posts tagged with &quot;Task&quot;"><span class="label label-info">Task</span></a>     <a href="/tags/TODO" rel="tooltip" title="View posts tagged with &quot;TODO&quot;"><span class="label label-info">TODO</span></a>     <a href="/tags/Dynamic" rel="tooltip" title="View posts tagged with &quot;Dynamic&quot;"><span class="label label-info">Dynamic</span></a>     <a href="/tags/Challenge" rel="tooltip" title="View posts tagged with &quot;Challenge&quot;"><span class="label label-info">Challenge</span></a>     <a href="/tags/LINQ" rel="tooltip" title="View posts tagged with &quot;LINQ&quot;"><span class="label label-info">LINQ</span></a>     <a href="/tags/combinatorics" rel="tooltip" title="View posts tagged with &quot;combinatorics&quot;"><span class="label label-info">combinatorics</span></a>     <a href="/tags/countdown" rel="tooltip" title="View posts tagged with &quot;countdown&quot;"><span class="label label-info">countdown</span></a>     <a href="/tags/f#" rel="tooltip" title="View posts tagged with &quot;f#&quot;"><span class="label label-info">f#</span></a>     <a href="/tags/permutation" rel="tooltip" title="View posts tagged with &quot;permutation&quot;"><span class="label label-info">permutation</span></a>     <a href="/tags/ESB" rel="tooltip" title="View posts tagged with &quot;ESB&quot;"><span class="label label-info">ESB</span></a>     <a href="/tags/extensibility" rel="tooltip" title="View posts tagged with &quot;extensibility&quot;"><span class="label label-info">extensibility</span></a>     <a href="/tags/NServiceBus" rel="tooltip" title="View posts tagged with &quot;NServiceBus&quot;"><span class="label label-info">NServiceBus</span></a>   
                </div>
            </div>
        </div>
    </div>

    <footer class="footer">
  <div class="container">
	<p class="pull-right"> <a href="/2009/08/23/using-ironpython-to-configure-castle-windsor-ii/" title="Previous Post: Using IronPython to configure Castle Windsor II">&laquo; Previous Blog Post</a> 	  |  <a href="#">Back to top</a>  |   	<a href="/2009/09/05/using-ironpython-to-configure-castle-windsor-iii/" title="Next Post: Using IronPython to configure Castle Windsor III">Next Blog Post &raquo; </a> 	 </p>        
	<p>Page last generated on April 15, 2013</p>
	<p>If need be, <a href="https://github.com/mouk/Feedback/issues/new" title="Leave feedback for Moukarram Kabbash"  target="_blank" >leave me some feedback</a>.</p>	
	<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>	
  </div>
</footer>

<script type="text/javascript">
/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = 'abstractast';

/* * * DON'T EDIT BELOW THIS LINE * * */
(function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());
</script>

<!-- Google Analytics -->
<script type="text/javascript">

  var _gaq = _gaq || [];
  var pluginUrl = '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
  _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
  _gaq.push(['_setAccount', 'UA-10348417-1']);
  _gaq.push(['_setDomainName', 'bstractast.com']);
  _gaq.push(['_setAllowLinker', true]);
  
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
  </body>
</html>
